{"version":3,"sources":["source.js","gain.js","module/index.js","analyser.js","index.js","resources/play.png","resources/pause.png","resources/stop.png","resources/repeat.png","resources/shuffle.png","resources/guitar.mp3","resources/piano.mp3"],"names":["Source","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","time","playing","duration","node","element","repeat","loop","_timeUpdate","bind","assertThisInitialized","_togglePlay","_stop","_setCurrentTime","_toggleRepeat","setState","currentTime","pause","resume","stop","addEventListener","removeEventListener","_this$state","react_default","a","createElement","className","concat","Math","floor","es","value","onChange","src","Pause","Play","alt","onClick","Stop","Shuffle","Repeat","Component","Gain","gain","_setGainValue","context","window","AudioContext","webkitAudioContext","destination","nodeIndex","document","resumeHandler","nodes","createNode","connect","disconnect","outputIndice","outputIndex","inputIndex","push","output","input","index","indexOf","splice","createMediaSource","url","timeout","Promise","resolve","reject","preload","timer","source","setTimeout","readyState","onSourceReady","clearTimeout","createMediaElementSource","start","play","extension","substring","lastIndexOf","length","sourceElement","type","appendChild","createGain","createAnalyser","Analyser","Audio","canvas","animator","getContext","getCanvasElement","width","height","frequencyData","analyser","Uint8Array","frequencyBinCount","getByteFrequencyData","getFrequencyData","frequencyCount","barWidth","barHeight","clearRect","i","fillRect","lib_default","ref","c","animate","draw","onResize","Demo","guitar","guitarSource","guitarAnalyser","guitarGain","piano","pianoSource","pianoAnalyser","pianoGain","navigator","mediaDevices","getUserMedia","audio","then","stream","createMediaStreamSource","liveSource","liveAnalyser","liveGain","_this2","d","demo","id","src_source","src_gain","src_analyser","render","src_Demo","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.8b73ba9c.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Slider from \"rc-slider\";\n\nimport Play from \"./resources/play.png\";\nimport Pause from \"./resources/pause.png\";\nimport Stop from \"./resources/stop.png\";\nimport Repeat from \"./resources/repeat.png\";\nimport Shuffle from \"./resources/shuffle.png\";\n\nimport \"./source.css\";\n\nclass Source extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      time: 0,\n      playing: false,\n      duration: props.node.element.duration,\n      repeat: props.node.element.loop\n    };\n\n    this._timeUpdate = this._timeUpdate.bind(this);\n    this._togglePlay = this._togglePlay.bind(this);\n    this._stop = this._stop.bind(this);\n    this._setCurrentTime = this._setCurrentTime.bind(this);\n    this._toggleRepeat = this._toggleRepeat.bind(this);\n  }\n\n  _timeUpdate() {\n    const { node } = this.props;\n\n    this.setState({ time: node.element.currentTime });\n  }\n\n  _togglePlay() {\n    const { node } = this.props;\n    const { playing } = this.state;\n\n    if (playing) {\n      node.pause();\n    } else {\n      node.resume();\n    }\n\n    this.setState({ playing: !playing });\n  }\n\n  _stop() {\n    const { node } = this.props;\n\n    node.stop();\n    this.setState({ playing: false });\n  }\n\n  _setCurrentTime(time) {\n    const { node } = this.props;\n    const { duration } = this.state;\n\n    node.element.currentTime = (time * duration) / 100;\n    this.setState({ time: node.element.currentTime });\n  }\n\n  _toggleRepeat(repeat) {\n    const { node } = this.props;\n\n    node.element.loop = repeat;\n    this.setState({ repeat: node.element.loop });\n  }\n\n  componentDidMount() {\n    const { node } = this.props;\n\n    node.element.addEventListener(\"timeupdate\", this._timeUpdate);\n    node.element.addEventListener(\"ended\", this._stop);\n  }\n\n  componentWillUnmount() {\n    const { node } = this.props;\n\n    node.element.removeEventListener(\"timeupdate\", this._timeUpdate);\n    node.element.addEventListener(\"ended\", this._stop);\n  }\n\n  render() {\n    const { time, duration, playing, repeat } = this.state;\n\n    return (\n      <div className=\"node source-node\">\n        <div className=\"time-bar\">\n          <div className=\"time\">\n            {`${Math.floor(time / 60)}:${\n              time < 10 ? `0${Math.floor(time)}` : Math.floor(time)\n            } `}/{` ${Math.floor(duration / 60)}:${\n              duration < 10 ? `0${Math.floor(duration)}` : Math.floor(duration)\n            }`}\n          </div>\n          <Slider\n            value={(time / duration) * 100}\n            onChange={this._setCurrentTime}\n          />\n        </div>\n        <div className=\"buttons\">\n          <img\n            src={playing ? Pause : Play}\n            alt=\"Toggle play\"\n            onClick={this._togglePlay}\n          />\n          <img src={Stop} alt=\"Stop\" onClick={this._stop} />\n          <img\n            src={repeat ? Shuffle : Repeat}\n            alt=\"Toggle repeat\"\n            onClick={this._toggleRepeat}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nSource.propTypes = {\n  node: PropTypes.shape()\n};\n\nexport default Source;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Slider from \"rc-slider\";\n\nimport \"./gain.css\";\n\nclass Gain extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { value: props.node.gain.value };\n\n    this._setGainValue = this._setGainValue.bind(this);\n  }\n\n  _setGainValue(value) {\n    const { node } = this.props;\n\n    node.gain.value = value / 100;\n    this.setState({ value: node.gain.value });\n  }\n\n  render() {\n    const { value } = this.state;\n\n    return (\n      <div className=\"node gain-node\">\n        <Slider value={value * 100} onChange={this._setGainValue} />\n      </div>\n    );\n  }\n}\n\nGain.propTypes = {\n  node: PropTypes.shape()\n};\n\nexport default Gain;\n","const context = new (window.AudioContext || window.webkitAudioContext)();\n\ncontext.destination.nodeIndex = 0;\n\nif (context.state !== \"running\") {\n  let resumeHandler = () => {\n    context.resume();\n    document.removeEventListener(\"click\", resumeHandler);\n  };\n\n  document.addEventListener(\"click\", resumeHandler);\n}\n\nconst nodes = [context.destination];\n\nconst createNode = node => {\n  let connect = node.connect.bind(node);\n  let disconnect = node.disconnect.bind(node);\n\n  node.outputIndice = [];\n\n  node.connect = (destination, outputIndex, inputIndex) => {\n    connect(\n      destination,\n      outputIndex,\n      inputIndex\n    );\n    node.outputIndice.push(destination.nodeIndex);\n\n    return destination;\n  };\n\n  node.disconnect = (destination, output, input) => {\n    disconnect(destination, output, input);\n\n    let index = node.outputIndice.indexOf(destination.nodeIndex);\n\n    if (index !== -1) {\n      node.outputIndice.splice(index, 1);\n    }\n  };\n\n  node.nodeIndex = nodes.push(node) - 1;\n\n  return node;\n};\n\nexport const isReady = () => context.state === \"running\";\n\nexport const destination = context.destination;\n\nexport const createMediaSource = (url, timeout) => {\n  return new Promise((resolve, reject) => {\n    let element = document.createElement(\"audio\");\n    element.preload = \"auto\";\n    let source = null;\n    let timer;\n\n    if (timeout) {\n      timer = setTimeout(() => {\n        if (element.readyState > 3) {\n          onSourceReady();\n        } else {\n          reject(`loading media source timed out: '${url}'`);\n        }\n      }, timeout);\n    }\n\n    let onSourceReady = () => {\n      clearTimeout(timer);\n\n      if (source === null) {\n        source = context.createMediaElementSource(element);\n\n        source.element = element;\n\n        source.start = () => {\n          element.currentTime = 0;\n          element.play();\n        };\n\n        source.pause = () => {\n          element.pause();\n        };\n\n        source.resume = () => {\n          element.play();\n        };\n\n        source.stop = () => {\n          element.pause();\n          element.currentTime = 0;\n        };\n      }\n\n      resolve(createNode(source));\n    };\n\n    element.addEventListener(\"canplaythrough\", onSourceReady);\n\n    element.addEventListener(\"error\", () => {\n      reject(`error loading media source: '${url}'`);\n    });\n\n    let extension = url.substring(url.lastIndexOf(\".\") + 1, url.length);\n\n    let sourceElement = document.createElement(\"source\");\n    sourceElement.src = url;\n    sourceElement.type = \"audio/\" + extension;\n\n    element.appendChild(sourceElement);\n\n    if (element.readyState > 3) {\n      onSourceReady();\n    }\n  });\n};\n\nexport const createBufferSource = url => {\n  return new Promise((resolve, reject) => {\n    let request = new XMLHttpRequest();\n\n    request.addEventListener(\"load\", () => {\n      context.decodeAudioData(\n        request.response,\n        buffer => {\n          let source = context.createBufferSource();\n          source.buffer = buffer;\n          resolve(createNode(source));\n        },\n        reject\n      );\n    });\n    request.addEventListener(\"error\", () => {\n      reject(`error loading buffer source: '${url}'`);\n    });\n\n    request.open(\"GET\", url, true);\n    request.responseType = \"arraybuffer\";\n\n    request.send();\n  });\n};\n\nexport const createLiveSource = () => {\n  return navigator.mediaDevices\n    .getUserMedia({ audio: true })\n    .then(stream => createNode(context.createMediaStreamSource(stream)));\n};\n\nexport const createGain = () => {\n  return createNode(context.createGain());\n};\n\nexport const createAnalyser = () => {\n  return createNode(context.createAnalyser());\n};\n\nexport const createOscillator = () => {\n  return createNode(context.createOscillator());\n};\n\n/** Returns an array of frequency data from the analyser. */\nexport const getFrequencyData = analyser => {\n  let frequencyData = new Uint8Array(analyser.frequencyBinCount);\n\n  analyser.getByteFrequencyData(frequencyData);\n\n  return frequencyData;\n};\n\nexport default Audio;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport AnimateCanvas from \"jw-animate-canvas\";\n\nimport { getFrequencyData } from \"./module\";\n\nimport \"./analyser.css\";\n\nclass Analyser extends Component {\n  componentDidMount() {\n    this.canvas.animator.start();\n  }\n\n  draw() {\n    const { canvas, props } = this;\n    const { node } = props;\n    const context = canvas.getContext();\n    const element = canvas.getCanvasElement();\n    const { width, height } = element;\n\n    let frequencyData = getFrequencyData(node);\n\n    let frequencyCount = frequencyData.length;\n\n    let barWidth = width / frequencyCount;\n    let barHeight = height / 255;\n\n    context.clearRect(0, 0, width, height);\n\n    for (let i = 0; i < frequencyCount; i++) {\n      context.fillRect(\n        i * barWidth,\n        (255 - frequencyData[i]) * barHeight,\n        barWidth,\n        frequencyData[i] * barHeight\n      );\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"node analyser-node\">\n        <AnimateCanvas\n          ref={c => (this.canvas = c)}\n          className=\"analyser-chart\"\n          animate={() => this.draw()}\n          onResize={() => this.draw()}\n        />\n      </div>\n    );\n  }\n}\n\nAnalyser.propTypes = {\n  node: PropTypes.shape()\n};\n\nexport default Analyser;\n","import React, { Component } from \"react\";\nimport { render } from \"react-dom\";\n\nimport Source from \"./source\";\nimport Gain from \"./gain\";\nimport Analyser from \"./analyser\";\n\nimport * as Audio from \"./module\";\nimport guitar from \"./resources/guitar.mp3\";\nimport piano from \"./resources/piano.mp3\";\n\nimport \"./style.css\";\n\nclass Demo extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n  }\n\n  async componentDidMount() {\n    let destination = Audio.destination;\n\n    try {\n      let guitarSource = await Audio.createMediaSource(guitar);\n      let guitarAnalyser = Audio.createAnalyser();\n      let guitarGain = Audio.createGain();\n\n      guitarSource\n        .connect(guitarGain)\n        .connect(guitarAnalyser)\n        .connect(destination);\n\n      this.setState({\n        guitarSource,\n        guitarGain,\n        guitarAnalyser\n      });\n    } catch (error) {}\n\n    try {\n      let pianoSource = await Audio.createMediaSource(piano);\n      let pianoAnalyser = Audio.createAnalyser();\n      let pianoGain = Audio.createGain();\n\n      pianoSource\n        .connect(pianoGain)\n        .connect(pianoAnalyser)\n        .connect(destination);\n\n      this.setState({\n        pianoSource,\n        pianoGain,\n        pianoAnalyser\n      });\n    } catch (error) {}\n\n    try {\n      let liveSource = await Audio.createLiveSource();\n      let liveAnalyser = Audio.createAnalyser();\n      let liveGain = Audio.createGain();\n\n      liveSource\n        .connect(liveGain)\n        .connect(liveAnalyser)\n        .connect(destination);\n\n      this.setState({\n        liveSource,\n        liveGain,\n        liveAnalyser\n      });\n    } catch (error) {}\n  }\n\n  componentWillUnmount() {}\n\n  render() {\n    const {\n      guitarSource,\n      guitarGain,\n      guitarAnalyser,\n      pianoSource,\n      pianoGain,\n      pianoAnalyser,\n      liveSource,\n      liveGain,\n      liveAnalyser\n    } = this.state;\n\n    return (\n      <div ref={d => (this.demo = d)} id=\"demo\">\n        {guitarSource && guitarGain && guitarAnalyser && (\n          <div className=\"channel\">\n            <hr />\n            <Source node={guitarSource} />\n            <Gain node={guitarGain} />\n            <Analyser node={guitarAnalyser} />\n          </div>\n        )}\n        {pianoSource && pianoGain && pianoAnalyser && (\n          <div className=\"channel\">\n            <hr />\n            <Source node={pianoSource} />\n            <Gain node={pianoGain} />\n            <Analyser node={pianoAnalyser} />\n          </div>\n        )}\n        {liveSource && liveGain && liveAnalyser && (\n          <div className=\"channel\">\n            <hr />\n            <div className=\"node\">Live </div>\n            <Gain node={liveGain} />\n            <Analyser node={liveAnalyser} />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nrender(<Demo />, document.getElementById(\"root\"));\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACqSURBVEhLYxiWYDsQa0CYtAH/gfgnEPcAsQBIgNoAZAEMvwbidCBmAmKqAWQLYPgcEDsAMVUANgtgeDUQywExRQCbwcj4GxC3ADEPEJMFsBmKDT8G4kggZgRikgA2w/Dh40BsDsREA2yGEMJ/gXguEEsCMUGAzQBi8WcgrgRiNiDGCbBpJBbTzAKaBhHNIplmyZSmGY1mRQXNCjuaFdc0rXBoXmUOJcDAAABYfqx3fCaFBgAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB3SURBVEhL7coxDoBAAITA+/+ntaIhrNHeSeg4v6+uh6wemmomq4emmsnqoalmsnpoqpmsHppqJquHpprJ6qGpZrJ6aKqZrB6aaiarh6aayeqhqWayemiqmawemmomq4emmsnqoalmsnpoqpmsHppqJquHfm+dcwMpjvsFvWTjlwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABRSURBVEhL7crBCQAgFIDQv//StYBCScceeHO+W+tRiuaSormkaC4pmkuK5pKiuaRoLimaS4rmkqK5pGguKZpLiuaSormkaC4pmkuK5tJ3amYD6aVCzOtc5kAAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEdSURBVEhL7ZS7TsMwFECDxFt0gBF2+AhWJlb4iTLwN0yIL2GHIpCQ2Fjp3gHBxADnODFyaSrZCV0QRzpSbuLrm/jaqf5puMDl+nIxfOI1bodoAVhAn3HfG79NLKATPMJWVvEc7/AN08QSP/AMp9jDR2xLKHWmwBo+oQ9f8AQHmEs6eesSuSw+HOOONwqJk89t8ggdcBqicsxNt+kBXtaXNbGhWyEqJz1oG+gyvYeowcCb6yGqB5vUBV/Sl30NUcMV+lniZ/q5DurCMZp7G6If2CAb5YAuBTYxbvWZc+DWcpni5CUFlvAQ79G8B1zBb6zm4UgnVwvmaA9jjpPv4hTzCuRqQ29wiP5uWumzRNn0bXIWfbdpFn0O2p+iqr4AsRuHJIiBUggAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEASURBVEhL7ZXBCcJAEEWjB+3Bu01YhldBbyKCIOJFO7EgO7ABFXvQk/6nGRjWNWQTohcfPNgsk53JzibJ/uTsZPc1bIa73Mve86oBSIAXOWAihgWZJzmXnpZcybMM482rnMo3YsE4ksZExmK8HxN4qHQtueEoO7mMmdtIYgxbvHCLQtryILmRp5jlY0voYb5Sk4fyJvvSqidRSOVjyjbQ6KLqa+P3PlZ9bb5aPdvlT09tfPU0mobT+JBKTQ6r56gy5uhyhD3MJx1TtmErrXqS+YS8hMkvmgWFjqXBOBbjLf0totqlDFlIe5KYpb5FqdjiSd+iFFi80R9O47/MX5FlD2JSdl3yzNvVAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/guitar.2ef78c16.mp3\";","module.exports = __webpack_public_path__ + \"static/media/piano.498b718c.mp3\";"],"sourceRoot":""}